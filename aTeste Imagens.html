<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Visualizador</title>
<style>
    :root{--g:12px;--w:220px;--bg:#f6f7fb;--cb:#fff;--m:#666}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:#111}
    .a{max-width:1200px;margin:20px auto;padding:18px}
    .c{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-bottom:14px}
    .c .b,select{padding:8px 12px;border-radius:8px;border:1px solid #ddd;background:#fff;cursor:pointer}
    .c .b.act{box-shadow:0 2px 8px rgba(10,10,10,.06);border-color:#bbb}
    .s{flex:1;min-width:180px}
    input[type=search]{width:100%;padding:10px 12px;border-radius:8px;border:1px solid #ddd}
    .st{font-size:13px;color:var(--m)}
    .gy{display:grid;gap:var(--g)}
    .m-b{grid-template-columns:repeat(auto-fill,minmax(var(--w),1fr))}
    .it{background:var(--cb);border-radius:10px;overflow:hidden;display:flex;flex-direction:column;border:1px solid rgba(0,0,0,.04)}
    .iw{display:flex;align-items:center;justify-content:center;padding:8px;background:linear-gradient(180deg,rgba(0,0,0,.02),transparent)}
    .iw img{display:block;width:100%;height:auto;max-width:100%;border-radius:6px;transition:object-fit .3s ease}
    .mt{padding:10px 12px;font-size:14px}
    .mt .n{font-weight:600}
    .mt .t{font-size:13px;color:var(--m);margin-top:6px}
    .ms{column-width:var(--w);column-gap:var(--g)}
    .ms .mi{display:inline-block;width:100%;margin:0 0 var(--g) 0;background:var(--cb);border-radius:10px;overflow:hidden;border:1px solid rgba(0,0,0,.04)}
    .ms .mi .iw{padding:8px}
    .stg{position:absolute;left:8px;top:8px}
    .ic{position:relative;width:100%}
    .stg svg{pointer-events:none}
    .cr img{object-fit:cover;width:100%;height:200px}
    .fd{margin-bottom:20px;background:#fff;border-radius:10px;border:1px solid #ddd;overflow:hidden}
    .fh{display:flex;align-items:center;gap:8px;padding:10px 14px;cursor:pointer;background:#f0f0f5;font-weight:600}
    .fh:hover{background:#e9e9ef}
    .fh svg{width:20px;height:20px;transition:transform .3s ease}
    .fd.cl .fh svg{transform:rotate(-90deg)}
    .fc{padding:12px;display:none}
    .fd.op .fc{display:block;animation:fIn .3s ease}
    @keyframes fIn{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}
    @media(max-width:600px){:root{--w:140px}}
</style>
</head>
<body>
<div class="a">
  <div class="c">
    <div>
      <button class="b vb act" data-v="b">Blocos</button>
      <button class="b vb" data-v="m">Alvenaria</button>
    </div>
    <div><button class="b" id="cr">Cortar</button></div>
    <div>
      <select id="gp">
        <option value="n">Por Nome</option>
        <option value="t">Por Tipo</option>
      </select>
    </div>
    <div class="s"><input id="q" type="search" placeholder="Buscar..."></div>
    <div class="st" id="stc">0 imgs</div>
  </div>

  <div id="gb" class="gy m-b"></div>
  <div id="gm" class="gy ms" style="display:none"></div>
</div>

<script>
    function   $(s){return document.querySelector(s)}
    function  $$(s){return document.querySelectorAll(s)}
    function esc(s){return String(s).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'","&#39;")}
    
    const imgs=[
    {n:'GatoFofo',t:'Figurinha',u:'https://picsum.photos/id/237/800/600'},
    {n:'Praia',t:'Paisagem',u:'https://picsum.photos/id/1016/1200/800'},
    {n:'Montanha',t:'Paisagem',u:'https://picsum.photos/id/1003/600/900'},
    {n:'Cachorro',t:'Figurinha',u:'https://picsum.photos/id/1025/600/450'},
    {n:'Cidade',t:'Urbano',u:'https://picsum.photos/id/1011/900/600'},
    {n:'Flores',t:'Macro',u:'https://picsum.photos/id/1020/700/1000'},
    {n:'Carro',t:'Objeto',u:'https://picsum.photos/id/1071/900/500'},
    {n:'Pra√ßa',t:'Urbano',u:'https://picsum.photos/id/1031/700/500'},
    {n:'Lago',t:'Paisagem',u:'https://picsum.photos/id/1043/1200/800'}
    ];

    const gb=$('#gb'),gm=$('#gm'),q=$('#q'),stc=$('#stc'),vbs=$$('.vb'),cr=$('#cr'),gp=$('#gp');
    let st={v:'b',q:'',c:false,g:'n'};

    function mkB(i){
        const c=el('article','it');
        const iw=el('div','iw'+(st.c?' cr':'')),ic=el('div','ic'),im=img(i.u,i.n);
        const sv=el('div','stg');
        sv.innerHTML=`<svg width="140" height="28"><rect rx="6" ry="6" width="140" height="28" fill="rgba(0,0,0,.45)"/><text x="8" y="18" font-family="Arial" font-size="12" fill="#fff">${esc(i.n)}</text></svg>`;
        ic.append(sv,im);iw.append(ic);
        const m=el('div','mt');m.innerHTML=`<div class="n">${esc(i.n)}</div><div class="t">${esc(i.t)}</div>`;
        c.append(iw,m);return c;
    }

    function mkM(i){
        const c=el('div','mi');
        const iw=el('div','iw'+(st.c?' cr':'')),ic=el('div','ic'),im=img(i.u,i.n);
        const sv=el('div','stg');
        sv.innerHTML=`<svg width="120" height="26"><rect rx="6" ry="6" width="120" height="26" fill="rgba(0,0,0,.45)"/><text x="8" y="17" font-family="Arial" font-size="11" fill="#fff">${esc(i.n)}</text></svg>`;
        ic.append(sv,im);iw.append(ic);
        const m=el('div','mt');m.innerHTML=`<div class="n">${esc(i.n)}</div><div class="t">${esc(i.t)}</div>`;
        c.append(iw,m);return c;
    }

    function  el(t,c){const e=document.createElement(t);if(c)e.className=c;return e}
    function img(u,a){const i=new Image();i.loading='lazy';i.src=u;i.alt=a;return i}

    function ren(){
        const qq=st.q.trim().toLowerCase();gb.innerHTML='';gm.innerHTML='';
        const f=imgs.filter(i=>i.n.toLowerCase().includes(qq)||i.t.toLowerCase().includes(qq));
        stc.textContent=f.length+' img'+(f.length!=1?'s':'');
        if(st.g==='t'){
            const g={};f.forEach(i=>{(g[i.t]??=[]).push(i)});
            for(const[k,v]of Object.entries(g)){
            const fd=el('div','fd op'),fh=el('div','fh');
            fh.innerHTML=`<svg viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M4 4h5l2 3h9a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z'/></svg> ${esc(k)}`;
            const fc=el('div','fc'),gy=el('div',st.v==='b'?'gy m-b':'gy ms');
            v.forEach(i=>gy.append(st.v==='b'?mkB(i):mkM(i)));
            fh.onclick=()=>fd.classList.toggle('op'),fd.classList.toggle('cl');
            fc.append(gy);fd.append(fh,fc);gb.append(fd);
            }
            gm.style.display='none';gb.style.display='block';
        }else{
            f.forEach(i=>{gb.append(mkB(i));gm.append(mkM(i))});
            if(st.v==='b'){gb.style.display='grid';gm.style.display='none'}else{gb.style.display='none';gm.style.display='block'}
        }
    }

    q.oninput=e=>{st.q=e.target.value;ren()}
    vbs.forEach(b=>b.onclick=()=>{vbs.forEach(x=>x.classList.remove('act'));b.classList.add('act');st.v=b.dataset.v;ren()})
    cr.onclick=()=>{st.c=!st.c;cr.classList.toggle('act',st.c);cr.textContent=st.c?'Sem corte':'Cortar';ren()}
    gp.onchange=e=>{st.g=e.target.value;ren()}

    ren()
</script>
</body>
</html>
